<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tambah Penerima - Sistem Donasi</title>
    <link rel="stylesheet" href="css/global.css" />
    <link rel="stylesheet" href="css/penerima.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  </head>

  <body>
    <!-- Header -->
    <header class="app-header">
      <div class="header-content">
        <div class="logo-section">
          <h1>SISTEM DONASI</h1>
          <p>Manage Donations Efficiently</p>
        </div>
        <div class="nav-actions">
          <button onclick="goHome()" class="btn btn-outline">Dashboard</button>
          <button onclick="goToDonor()" class="btn btn-secondary">Data Donatur</button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <div class="card penerima-container">
          <!-- Header Section -->
          <div class="page-header">
            <h4>Penerima</h4>
            <h1>Tambah Penerima Donasi</h1>
          </div>

          <!-- Progress Indicator -->
          <div class="progress-steps">
            <div class="step completed">
              <span class="step-number">1</span>
              <span class="step-label">Input Donatur</span>
            </div>
            <div class="step active">
              <span class="step-number">2</span>
              <span class="step-label">Data Penerima</span>
            </div>
            <div class="step">
              <span class="step-number">3</span>
              <span class="step-label">Selesai</span>
            </div>
          </div>

          <!-- Form Section -->
          <div class="form-section">
            <div class="grid-container">
              <!-- Left Column - Form Inputs -->
              <div class="form-column">
                <div class="form-group">
                  <label for="pantiSelect">Pilih Panti *</label>
                  <select id="pantiSelect" class="form-control">
                    <option value="">-- Pilih Panti Terdaftar --</option>
                  </select>
                  <a href="daftar_panti.html" class="btn-link"> <span>+</span> Daftarkan Panti Baru </a>
                </div>

                <div class="form-group">
                  <label for="receiver_name">Nama Penerima *</label>
                  <input type="text" id="receiver_name" class="form-control" placeholder="Masukkan nama lengkap penerima" />
                </div>
              </div>

              <!-- Right Column - Additional Info -->
              <div class="info-column">
                <div class="info-panel">
                  <h3>Donatur Terakhir</h3>
                  <div id="lastDonorInfo" class="donor-info">
                    <p>Menunggu data donatur...</p>
                  </div>
                </div>

                <div class="form-group">
                  <label for="receiver_need">Kebutuhan / Keterangan *</label>
                  <textarea id="receiver_need" class="form-control" placeholder="Deskripsi kebutuhan penerima..." rows="5"></textarea>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="form-actions">
              <button type="button" onclick="goToDonor()" class="btn btn-secondary">Kembali ke Donatur</button>
              <button id="btnSaveReceiver" class="btn btn-primary">Simpan & Catat Donasi</button>
            </div>

            <!-- Quote Section -->
            <div class="quote-section">
              <p class="quote-text">Berikan lebih banyak, karena memberi tidak akan membuatmu miskin.</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="/eel.js"></script>
    <script src="script.js"></script>
    <script>
      // Load last donor info
      function loadLastDonorInfo() {
        const lastDonorId = sessionStorage.getItem("last_donatur_id");
        const lastAmount = sessionStorage.getItem("last_donatur_amount");

        const donorInfo = document.getElementById("lastDonorInfo");
        if (lastDonorId && lastAmount) {
          donorInfo.innerHTML = `
            <p><strong>Donatur ID:</strong> ${lastDonorId}</p>
            <p><strong>Jumlah Donasi:</strong> Rp ${Number(lastAmount).toLocaleString()}</p>
            <p style="color: #28a745; font-weight: 500;">âœ“ Siap dicatat</p>
          `;
        } else {
          donorInfo.innerHTML = '<p style="color: #dc3545;">Belum ada data donatur. Silakan input donatur terlebih dahulu.</p>';
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        loadLastDonorInfo();
      });
    </script>
  </body>
</html>
